{"version":3,"file":"runtime-dom.esm-builder.js","sources":["../../shared/src/index.ts","../../runtime-core/src/componentPublicInstance.ts","../../runtime-core/src/components.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/apicreateApp.ts","../../reactivity/src/effect.ts","../../reactivity/src/baseHandlers.ts","../../reactivity/src/reactive.ts","../../reactivity/src/ref.ts","../../reactivity/src/computed.ts","../../runtime-core/src/scheduler.ts","../../runtime-core/src/render.ts","../../runtime-core/src/h.ts","../src/nodeOps.ts","../src/modules/attrs.ts","../src/modules/style.ts","../src/modules/class.ts","../src/modules/event.ts","../src/patchProps.ts","../src/index.ts"],"sourcesContent":["export const isObject = (val) => typeof val === 'object' && val !== null\r\n\r\nexport const assign = (val1, val2) => Object.assign(val1, val2)\r\n\r\nexport const isArray = (val) => Array.isArray(val)\r\nexport const isNumber = (val) => typeof val === 'number'\r\nexport const isString = (val) => typeof val === 'string'\r\nexport const isFunction = (val) => typeof val === 'function'\r\n\r\nexport const isIntegerKey = (val) => parseInt(val) + '' === val\r\n\r\nconst hasOwn = Object.prototype.hasOwnProperty\r\nexport const hasOwnProperty = (target, key) => hasOwn.call(target, key)\r\n\r\nexport const isChanged = (oldValue, newValue) => oldValue !== newValue\r\n\r\nexport { ShapeFlags } from './shapeFlags'\r\n","import { hasOwnProperty } from '@vue3-mini/shared'\r\n\r\nexport const PublicInstanceProxyHandlers = {\r\n  get({ _: instance }, key) {\r\n    const { setupState, props, data } = instance\r\n    if (hasOwnProperty(setupState, key)) {\r\n      return setupState[key]\r\n    } else if (hasOwnProperty(props, key)) {\r\n      return props[key]\r\n    } else if (hasOwnProperty(data, key)) {\r\n      return data[key]\r\n    } else {\r\n      return undefined\r\n    }\r\n  },\r\n  set({ _: instance }, key, value) {\r\n    const { setupState, props, data } = instance\r\n    if (hasOwnProperty(setupState, key)) {\r\n      setupState[key] = value\r\n    } else if (hasOwnProperty(props, key)) {\r\n      props[key] = value\r\n    } else if (hasOwnProperty(data, key)) {\r\n      data[key] = value\r\n    }\r\n  },\r\n}\r\n","import { isFunction, isObject, ShapeFlags } from '@vue3-mini/shared'\r\nimport { PublicInstanceProxyHandlers } from './componentPublicInstance'\r\n// 组件的方法\r\n\r\nexport const createComponentInstance = (vnode) => {\r\n  //webcomponent 组件需要有属性、插槽\r\n  const instance = {\r\n    //组件实例\r\n    vnode,\r\n    type: vnode.type,\r\n    props: {},\r\n    attrs: {},\r\n    ctx: {},\r\n    slots: {},\r\n    setupState: {}, // 如果setup返回是一个对象 将作为setupState的值\r\n    render: null,\r\n    isMounted: false, //是否被挂载\r\n  }\r\n  instance.ctx = { _: instance }\r\n  return instance\r\n}\r\n\r\nexport const setupComponent = (instance) => {\r\n  const { props, children } = instance.vnode\r\n  instance.props = props // initProps\r\n  instance.children = children //initSlot 插槽的解析\r\n  // 先判断当前组件是不是有状态的组件 函数组件\r\n  const isStateful = instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT\r\n  if (isStateful) {\r\n    // 有状态的组件\r\n    // 调用组件的setup方法  拿到返回值填充setupState和render\r\n    setupStatefulComonent(instance)\r\n  }\r\n}\r\n\r\nfunction setupStatefulComonent(instance) {\r\n  // 1.代理 render方法里参数为proxy 但是可以直接访问到instance的各种属性 代理一层\r\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers as any)\r\n  //2.获取组件类型  调用setup\r\n  const component = instance.type\r\n  const { setup } = component\r\n  if (setup) {\r\n    const setupContext = createSetupContext(instance)\r\n    const setupResult = setup(instance.props, setupContext)\r\n    handleSeupResult(instance, setupResult)\r\n  } else {\r\n    finishComponentSetup(instance)\r\n  }\r\n\r\n  // component.render(instance.proxy)\r\n}\r\n\r\nfunction handleSeupResult(instance, setupResult) {\r\n  if (isFunction(setupResult)) {\r\n    instance.render = setupResult\r\n  } else if (isObject(setupResult)) {\r\n    instance.setupState = setupResult\r\n  }\r\n}\r\n\r\nfunction finishComponentSetup(instance) {\r\n  const component = instance.type\r\n  if (!instance.render) {\r\n    // 对模板进行编译 生成render函数\r\n    if (!component.render && component.template) {\r\n      // 编译结果赋值给render\r\n    }\r\n  }\r\n  // 对vue2.x兼容处理 applyOptions 遍历\r\n}\r\n\r\nfunction createSetupContext(instance) {\r\n  return {\r\n    attrs: instance.attrs,\r\n    props: instance.props,\r\n    slots: instance.slots,\r\n    emit: () => {\r\n      //\r\n    },\r\n    expose: () => {\r\n      //\r\n    },\r\n  }\r\n}\r\n","import { isArray, isObject, isString, ShapeFlags } from '@vue3-mini/shared'\r\n\r\nexport const isVNode = (vnode) => vnode.__v_isVnode\r\n\r\nexport const createVNode = (type, props, children = null) => {\r\n  // 用来描述对应的内容  虚拟节点具有跨平台的能力\r\n  const shapeFlag = isString(type)\r\n    ? ShapeFlags.ELEMENT // dom\r\n    : isObject(type)\r\n    ? ShapeFlags.STATEFUL_COMPONENT // component\r\n    : 0\r\n  const vnode = {\r\n    __v_isVnode: true, //是一个虚拟节点\r\n    type,\r\n    props,\r\n    children,\r\n    el: null, // 会将虚拟节点跟真实节点对应\r\n    key: props && props.key,\r\n    shapeFlag, // 判断自己的类型和儿子的类型\r\n  }\r\n  normalizeChildren(vnode, children)\r\n  return vnode\r\n}\r\n\r\nfunction normalizeChildren(vnode, children) {\r\n  let type = 0\r\n  if (children === null) {\r\n    //\r\n  } else if (isArray(children)) {\r\n    type = ShapeFlags.ARRAY_CHILDREN\r\n  } else {\r\n    type = ShapeFlags.TEXT_CHILDREN\r\n  }\r\n  vnode.shapeFlag |= type\r\n}\r\n\r\nexport const Text = Symbol('Text')\r\nexport function normalizeVNode(child) {\r\n  if (isObject(child)) return child\r\n  return createVNode(Text, null, String(child))\r\n}\r\n","import { createVNode } from './vnode'\r\n\r\nexport function createAppAPI(render) {\r\n  return function createApp(rootComponent, rootProps) {\r\n    const app = {\r\n      _props: rootProps,\r\n      _component: rootComponent,\r\n      _container: null,\r\n      mount: function (container) {\r\n        //1.创建虚拟节点\r\n        const vnode = createVNode(rootComponent, rootProps)\r\n        //2.渲染\r\n        render(vnode, container)\r\n        app._container = container\r\n      },\r\n    }\r\n    return app\r\n  }\r\n}\r\n","import { isArray, isIntegerKey } from '@vue3-mini/shared'\r\nimport { TriggerOpTypes } from './operators'\r\n\r\nfunction effect(fn, options: any = {}) {\r\n  // 创建一个响应的effect,依赖变化时重新执行副作用\r\n  const effect = createReactiveEffect(fn, options)\r\n  if (!options.lazy) {\r\n    // 默认执行一次\r\n    effect()\r\n  }\r\n  return effect\r\n}\r\n\r\nlet uid = 0\r\nlet activeEffect // 当前的effect\r\nconst effectStack = [] // effect栈数组\r\nfunction createReactiveEffect(fn, options) {\r\n  const effect = function reactiveEffect() {\r\n    /**\r\n     * 当effect有嵌套关系时  可能会错误的引用当前的activeEffect\r\n     * 利用栈 先进后出  当副作用执行完   更新activeEffect为栈数组的最后一项\r\n     */\r\n    if (!effectStack.includes(effect)) {\r\n      // 防止重复添加\r\n      try {\r\n        activeEffect = effect\r\n        effectStack.push(activeEffect)\r\n        return fn()\r\n      } finally {\r\n        effectStack.pop()\r\n        activeEffect = effectStack[effectStack.length - 1]\r\n      }\r\n    }\r\n  }\r\n  effect.id = uid++ // 区分effect的唯一标识\r\n  effect._isEffect = true // 标记响应式的effect\r\n  effect.raw = fn // 副作用\r\n  effect.options = options // 参数配置\r\n  return effect\r\n}\r\n\r\n/**\r\n * target key effect对应数据结构关系\r\n * target --> key --> effect 例：{name:'c',age:12} --> name --> [effect1,effect2]\r\n * targetsMap\r\n * targetsMap --> target1 --> key --> effect\r\n */\r\n\r\nconst targetsMap = new WeakMap()\r\n// 依赖收集\r\nfunction track(target, type, key) {\r\n  if (activeEffect === undefined || activeEffect === null) return\r\n  // 拿到targetsMap对应target的Map集合 {key:Set}\r\n  let depsMap = targetsMap.get(target)\r\n  if (!depsMap) {\r\n    targetsMap.set(target, (depsMap = new Map()))\r\n  }\r\n  // 拿到targetMap对应的key的Set集合 Set\r\n  let depMap = depsMap.get(key)\r\n  if (!depMap) {\r\n    depsMap.set(key, (depMap = new Set()))\r\n  }\r\n  if (!depMap.has(activeEffect)) {\r\n    depMap.add(activeEffect)\r\n  }\r\n  // console.log('ta', targetsMap)\r\n}\r\n// 依赖触发更新\r\nfunction trigger(target, type, key?, value?, oldValue?) {\r\n  // console.log('key', target, type, key, value, oldValue)\r\n  const depsMap = targetsMap.get(target)\r\n  console.log('3', targetsMap)\r\n  if (!depsMap) return // 没有收集过effect依赖直接返回\r\n\r\n  // 创建一个集合 统一执行副作用  去重\r\n  const effects = new Set()\r\n  const addEffect = (depMap) => {\r\n    depMap && depMap.forEach((effect) => effects.add(effect))\r\n  }\r\n\r\n  /**\r\n   * 查看修改的是否是数组且修改的是否是数组长度\r\n   * q: 数据使用可能会使用到数组的长度、取数组某个下标值\r\n   * r: 当更新数组的长度的时候  对应的数组长度的依赖和下标依赖也应该更新\r\n   */\r\n  if (isArray(target) && key === 'length') {\r\n    depsMap.forEach((dep, key) => {\r\n      // console.log('111', dep, key)\r\n      /**\r\n       * 查找收集过的key是否符合条件\r\n       * 1. obj.arr.length 当修改数组长度时候收集过的arr.length需要改变\r\n       * 2. obj.arr[2] 当修改数组长度时候收集过的key也就是对应的index值大于修改的数组长度value时(数组变短)需要改变\r\n       */\r\n      if (key > value || key === 'length') {\r\n        addEffect(dep)\r\n      }\r\n    })\r\n  } else {\r\n    if (key !== undefined) {\r\n      // 修改某个key\r\n      addEffect(depsMap.get(key))\r\n    }\r\n    switch (type) {\r\n      // 修改数组的某一个索引 当使用obj.arr时内部会自动收集length属性(对数组转成字符串调用toString,toString就会取得数组length)\r\n      case TriggerOpTypes.ADD:\r\n        if (isArray(target) && isIntegerKey(key)) {\r\n          addEffect(depsMap.get('length'))\r\n        }\r\n        break\r\n    }\r\n  }\r\n\r\n  effects.forEach((effect: any) => {\r\n    if (effect.options.scheduler) {\r\n      effect.options.scheduler(effect)\r\n    } else {\r\n      effect()\r\n    }\r\n  })\r\n}\r\n\r\nexport { effect, track, trigger }\r\n","// 实现new proxy(target, handlers)\r\n\r\nimport {\r\n  assign,\r\n  isObject,\r\n  isArray,\r\n  isIntegerKey,\r\n  hasOwnProperty,\r\n  isChanged,\r\n} from '@vue3-mini/shared'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOpTypes, TriggerOpTypes } from './operators'\r\nimport { reactive, readonly } from './reactive'\r\n\r\n/**\r\n * proxy + Reflect\r\n * Refect优势：\r\n *    r1: 后续Object上的方法会迁徙到Reflect上,例如Object.getProptypeof()\r\n *    r2: 以前的obj[key]设置值可能会失败，并不会报异常，也没有设置状态标识，Reflect方法会有一个状态标识true/false\r\n */\r\nfunction createGetter(isReadonly = false, isShallow = false) {\r\n  return function get(target, key, receiver) {\r\n    const res = Reflect.get(target, key)\r\n    if (!isReadonly) {\r\n      // 收集依赖\r\n      track(target, TrackOpTypes.GET, key)\r\n    }\r\n    if (isShallow) return res\r\n    /**\r\n     * vue2的代理模式是一上来就递归对象的key代理，深度遍历对象，性能不好\r\n     * vue3是当读取对象的key时才会触发代理,懒代理\r\n     */\r\n    if (isObject(res)) {\r\n      return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nfunction createSetter(isShallow = false) {\r\n  // console.log('222')\r\n  return function set(target, key, value, receiver) {\r\n    const oldVlaue = target[key]\r\n    const hasKey =\r\n      isArray(target) && isIntegerKey(key)\r\n        ? Number(key) < target.length\r\n        : hasOwnProperty(target, key)\r\n    const result = Reflect.set(target, key, value, receiver)\r\n    if (!hasKey) {\r\n      //新增\r\n      trigger(target, TriggerOpTypes.ADD, key, value)\r\n    } else if (isChanged(oldVlaue, value)) {\r\n      // 修改\r\n      trigger(target, TriggerOpTypes.SET, key, value, oldVlaue)\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n\r\nconst get = createGetter()\r\nconst shallowGet = createGetter(false, true)\r\nconst readonlyGet = createGetter(true)\r\nconst shallowReadonlyGet = createGetter(true, true)\r\n\r\nconst set = createSetter()\r\nconst shallowSet = createSetter(true)\r\n\r\nconst readonlyObj = {\r\n  set() {\r\n    return console.warn(`key in readonly`)\r\n  },\r\n}\r\n\r\nconst mutableHandles = {\r\n  get,\r\n  set,\r\n}\r\nconst shallowReactiveHandlers = {\r\n  get: shallowGet,\r\n  set: shallowSet,\r\n}\r\nconst readonlyHandlers = assign(\r\n  {\r\n    get: readonlyGet,\r\n  },\r\n  readonlyObj,\r\n)\r\nconst shallowReadonlyHandlers = assign(\r\n  {\r\n    get: shallowReadonlyGet,\r\n  },\r\n  readonlyObj,\r\n)\r\n\r\nexport {\r\n  mutableHandles,\r\n  shallowReadonlyHandlers,\r\n  readonlyHandlers,\r\n  shallowReactiveHandlers,\r\n}\r\n","import { isObject } from '@vue3-mini/shared'\r\nimport {\r\n  shallowReactiveHandlers,\r\n  shallowReadonlyHandlers,\r\n  readonlyHandlers,\r\n  mutableHandles,\r\n} from './baseHandlers'\r\n\r\nfunction reactive(target) {\r\n  return createReactiveObject(target, false, mutableHandles)\r\n}\r\nfunction shallowReactive(target) {\r\n  return createReactiveObject(target, false, shallowReactiveHandlers)\r\n}\r\nfunction shallowReadonly(target) {\r\n  return createReactiveObject(target, true, shallowReadonlyHandlers)\r\n}\r\nfunction readonly(target) {\r\n  return createReactiveObject(target, true, readonlyHandlers)\r\n}\r\n\r\n/**\r\n * 是不是仅读  是不是深度  柯里化\r\n * new Proxy() 最核心的还是拦截  数据的读取和修改 get set\r\n */\r\nconst reactiveMap = new WeakMap() // 自动垃圾回收 不会造成内存泄漏，key是一个对象\r\nconst readonlyMap = new WeakMap()\r\nfunction createReactiveObject(target, isReadonly, baseHandlers) {\r\n  // 只代理对象\r\n  if (!isObject(target)) return target\r\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\r\n  // 已经被代理过了不需要被代理\r\n  const existProxy = proxyMap.get(target)\r\n  if (existProxy) return existProxy\r\n  // 将代理对象缓存\r\n  const proxy = new Proxy(target, baseHandlers)\r\n  proxyMap.set(target, proxy)\r\n  return proxy\r\n}\r\n\r\nexport { reactive, shallowReactive, shallowReadonly, readonly }\r\n","import { isArray, isChanged, isObject } from '@vue3-mini/shared'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOpTypes, TriggerOpTypes } from './operators'\r\nimport { reactive } from './reactive'\r\n\r\nfunction ref(value) {\r\n  return createrEef(value)\r\n}\r\n\r\nfunction shallowRef(value) {\r\n  return createrEef(value, true)\r\n}\r\n\r\nfunction toRef(target, key) {\r\n  return new ObjectRefImpl(target, key)\r\n}\r\n\r\nfunction toRefs(target) {\r\n  const res = isArray(target) ? new Array(target.length) : {}\r\n  for (const key in target) {\r\n    res[key] = toRef(target, key)\r\n  }\r\n  return res\r\n}\r\n\r\nconst convert = (value) => (isObject(value) ? reactive(value) : value)\r\n\r\nclass RefImpl {\r\n  public _value // 声明一个_value\r\n  // eslint-disable-next-line camelcase\r\n  public __v_isRef = true // 产生的实例会被添加上一个__v_isRef属性表示是一个ref属性\r\n  // 参数前加上修饰符 表示此属性会被加到实例上\r\n  constructor(public rawValue, public isShallow) {\r\n    // 如果是深度代理 使用reactive\r\n    this._value = isShallow ? rawValue : convert(rawValue)\r\n  }\r\n  get value() {\r\n    track(this, TrackOpTypes.GET, 'value')\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    if (isChanged(this.rawValue, newValue)) {\r\n      this.rawValue = newValue\r\n      this._value = this.isShallow ? newValue : convert(newValue)\r\n      trigger(this, TriggerOpTypes.SET, 'value', newValue)\r\n    }\r\n  }\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public _value\r\n  // eslint-disable-next-line camelcase\r\n  public __v_isRef = true\r\n  constructor(public target, public key) {}\r\n  get value() {\r\n    return this.target[this.key]\r\n  }\r\n  set value(newValue) {\r\n    this.target[this.key] = newValue\r\n  }\r\n}\r\n\r\nfunction createrEef(rawValue, isShallow = false) {\r\n  return new RefImpl(rawValue, isShallow)\r\n}\r\n\r\nexport { ref, shallowRef, toRef, toRefs }\r\n","import { isFunction } from '@vue3-mini/shared'\r\nimport { effect, track, trigger } from './effect'\r\nimport { TrackOpTypes, TriggerOpTypes } from './operators'\r\n\r\nfunction computed(gettersOptions) {\r\n  let getter\r\n  let setter\r\n  if (isFunction(gettersOptions)) {\r\n    getter = gettersOptions\r\n    setter = () => {\r\n      console.warn('computed must be readonly')\r\n    }\r\n  } else {\r\n    getter = gettersOptions.get\r\n    setter = gettersOptions.set\r\n  }\r\n  return createComputed(getter, setter)\r\n}\r\n\r\nclass ComputedRefImpl {\r\n  public _value\r\n  public _dirty = true // 默认取值时不用缓存\r\n  public _effect\r\n  constructor(getter, public setter) {\r\n    // computed的getter就是一个effect 里面会进行收集依赖\r\n    this._effect = effect(getter, {\r\n      lazy: true,\r\n      scheduler: () => {\r\n        if (!this._dirty) {\r\n          this._dirty = true\r\n          trigger(this, TriggerOpTypes.SET, 'value')\r\n        }\r\n      },\r\n    })\r\n  }\r\n  get value() {\r\n    // computed里的getter默认不执行  只有当取值的时候才会执行  返回值是getter的返回值  存入缓存 多次取值不会一直执行\r\n    if (this._dirty) {\r\n      this._value = this._effect()\r\n      this._dirty = false\r\n    }\r\n    track(this, TrackOpTypes.GET, 'value')\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    this.setter(newValue)\r\n  }\r\n}\r\n\r\nfunction createComputed(getter, setter) {\r\n  return new ComputedRefImpl(getter, setter)\r\n}\r\n\r\nexport { computed }\r\n","const queue = []\r\nexport function queueJob(job) {\r\n  if (!queue.includes(job)) {\r\n    queue.push(job)\r\n    queusFinish()\r\n  }\r\n}\r\n\r\nlet isFinishPending = false\r\nfunction queusFinish() {\r\n  if (!isFinishPending) {\r\n    isFinishPending = true\r\n    Promise.resolve().then(flushJobs)\r\n  }\r\n}\r\n\r\nfunction flushJobs() {\r\n  isFinishPending = false\r\n  // 需要根据父子顺序依次刷新，保证先刷新父再刷新子\r\n  for (let i = 0; i < queue.length; i++) {\r\n    const job = queue[i]\r\n    job()\r\n    console.log(job)\r\n  }\r\n  queue.length = 0\r\n}\r\n","import { createComponentInstance, setupComponent } from './components'\r\nimport { isObject, ShapeFlags } from '@vue3-mini/shared'\r\n/**\r\n * 渲染流程\r\n * 1. 将组件转化成虚拟dom\r\n * 2. 将虚拟dom转换成真实dom\r\n */\r\n\r\nimport { createAppAPI } from './apicreateApp'\r\nimport { effect } from '@vue3-mini/reactivity'\r\nimport { createVNode, normalizeVNode, Text } from './vnode'\r\nimport { queueJob } from './scheduler'\r\n\r\nexport function createRender(renderOptions) {\r\n  const {\r\n    createElement: hostCreateElement,\r\n    remove: hostRemove,\r\n    insert: hostInsert,\r\n    querySelector: hostQuerySelector,\r\n    setElementText: hostSetElementText,\r\n    createText: hostCreateText,\r\n    setText: hostSetText,\r\n    patchProps: hostPatchProps,\r\n    nextSibling: hostNextSibling,\r\n  } = renderOptions\r\n  // -----------组件start---------\r\n  const setupRenderEffect = (instance, container) => {\r\n    //需要创建一个effect 在effect中调用render方法，这样render方法中拿到的数据会收集这个effect，属性更新时effect重新执行\r\n    //每个组件都会有一个effect vue3是组件级更新 数据重新变化重新执行组件的effect\r\n    instance.update = effect(\r\n      function componentEffect() {\r\n        if (!instance.isMounted) {\r\n          // 初次渲染\r\n          const proxyToUse = instance.proxy\r\n          // 2.x $vnode _vnode\r\n          // 组件是vnode 真正渲染内容subTree\r\n          const subTree = (instance.subTree = instance.render.call(\r\n            proxyToUse,\r\n            proxyToUse,\r\n          ))\r\n          patch(null, subTree, container)\r\n          instance.isMounted = true\r\n        } else {\r\n          // 更新\r\n          console.log('更新')\r\n          const prevTree = instance.subTree\r\n          const proxyToUse = instance.proxy\r\n          const nextTree = instance.render.call(proxyToUse, proxyToUse)\r\n          patch(prevTree, nextTree, container)\r\n        }\r\n      },\r\n      {\r\n        scheduler: queueJob,\r\n      },\r\n    )\r\n  }\r\n  const mountComponent = (initalVNode, container) => {\r\n    /**\r\n     * 组件渲染流程最核心的就是调用setup拿到返回值 获取render方法的返回结果\r\n     * 1. 创建实例\r\n     * 2. 需要的数据解析到实例上\r\n     * 3. 创建一个effect 让render函数执行  render函数本身就是一个effect 依赖变化要重新执行\r\n     */\r\n    // 1. 创建实例\r\n    const instance = (initalVNode.component =\r\n      createComponentInstance(initalVNode))\r\n    // 2. 需要的数据解析到实例上\r\n    setupComponent(instance)\r\n    // 3. 创建一个effect 让render函数执行  render函数本身就是一个effect 依赖变化要重新执行\r\n    setupRenderEffect(instance, container)\r\n  }\r\n  const processComponent = (oldVale, newVal, container) => {\r\n    if (oldVale === null) {\r\n      // 旧的没有 创建\r\n      mountComponent(newVal, container)\r\n    } else {\r\n      // 更新\r\n      console.log('gengxin')\r\n    }\r\n  }\r\n  //-------------组件end---------\r\n  // ----------元素start----------\r\n  const mountChildren = (children, el) => {\r\n    children.forEach((child) => {\r\n      const normalizeChild = normalizeVNode(child)\r\n      patch(null, normalizeChild, el)\r\n    })\r\n  }\r\n  const mountElement = (vnode, container, ancher) => {\r\n    const { type, props, shapeFlag, children } = vnode\r\n    const el = (vnode.el = hostCreateElement(type))\r\n    if (props) {\r\n      for (const key in props) {\r\n        hostPatchProps(el, key, null, props[key])\r\n      }\r\n    }\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      // 文本\r\n      hostSetElementText(el, children)\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      mountChildren(children, el)\r\n    }\r\n    hostInsert(el, container, ancher)\r\n  }\r\n  const patchProps = (oldProps, newProps, el) => {\r\n    if (oldProps !== newProps) {\r\n      for (const key in newProps) {\r\n        const prev = oldProps[key]\r\n        const next = newProps[key]\r\n        prev !== next && hostPatchProps(el, key, prev, next)\r\n      }\r\n      for (const key in oldProps) {\r\n        if (!newProps[key]) {\r\n          hostPatchProps(el, key, oldProps[key], null)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const unmountChildren = (children) => {\r\n    children.forEach((child) => {\r\n      unmount(child)\r\n    })\r\n  }\r\n  const patchKeyedChildren = (c1, c2, el) => {\r\n    let i = 0\r\n    let e1 = c1.length - 1\r\n    let e2 = c2.length - 1\r\n    /**\r\n     * key1: [a,b,c,d]\r\n     * key2: [a,b,e,f]\r\n     * 缩小后的diff核心是ef 尾部\r\n     */\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[i]\r\n      const n2 = c2[i]\r\n      if (isSameVNodeType(n1, n2)) {\r\n        patch(n1, n2, el)\r\n      } else {\r\n        break\r\n      }\r\n      i++\r\n    }\r\n    /**\r\n     * key1: [a,b,c,d]\r\n     * key2: [e,f,c,d]\r\n     * diff核心ef 首部\r\n     */\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[e1 - 1]\r\n      const n2 = c2[e2 - 1]\r\n      if (isSameVNodeType(n1, n2)) {\r\n        patch(n1, n2, el)\r\n      } else {\r\n        break\r\n      }\r\n      e1--\r\n      e2--\r\n    }\r\n    // common sequence + mount\r\n    // 有一方比较完成后 怎么确定挂载？\r\n    // 1.如果i比e1大 说明老的少\r\n    if (i > e1) {\r\n      // 老的少 新的多\r\n      if (i >= e2) {\r\n        // 新增部分\r\n        const nextPos = e2 + 1\r\n        const ancher = nextPos < c2.length ? c2[nextPos].el : null\r\n        while (i <= e2) {\r\n          patch(null, c2[i], el, ancher)\r\n          i++\r\n        }\r\n      } else if (i > e2) {\r\n        // 老的多 新的少\r\n        while (i <= e1) {\r\n          unmount(c1[i])\r\n          i++\r\n        }\r\n      } else {\r\n        //乱序比较  一样的尽可能的复用\r\n        const s1 = i\r\n        const s2 = i\r\n        // vue3是用新的做映射表  2是用老的做映射表\r\n        const keyToNewIndexMap = new Map()\r\n        for (let i = s2; i <= e2; i++) {\r\n          const childVNode = c2[i]\r\n          keyToNewIndexMap.set(childVNode.key, i)\r\n        }\r\n        // 去老的里面找有没有可以复用的\r\n        for (let i = s1; i <= e1; i++) {\r\n          const oldVNode = c1[i]\r\n          const newIndex = keyToNewIndexMap.get(oldVNode.key)\r\n          if (newIndex === undefined) {\r\n            unmount(oldVNode)\r\n          } else {\r\n            patch(oldVNode, c2[newIndex], el)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const patchChildren = (oldValue, newValue, el) => {\r\n    const c1 = oldValue.children\r\n    const c2 = newValue.children\r\n    const prevShapeFlag = oldValue.shapeFlag\r\n    const nextShapeFlag = newValue.shapeFlag\r\n    if (nextShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        // 老的有多个孩子但新的是文本\r\n        unmountChildren(c1)\r\n      }\r\n      if (c1 !== c2) {\r\n        // 两个都是文本\r\n        hostSetElementText(el, c2)\r\n      }\r\n    } else {\r\n      // 新的是数组  上一次是文本或者数组\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        if (nextShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n          // 多子节点比较 核心\r\n          patchKeyedChildren(c1, c2, el)\r\n        } else {\r\n          // 老的数组新的没有 删除老的\r\n          unmountChildren(c1)\r\n        }\r\n      } else {\r\n        // 老的是文本\r\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n          hostSetElementText(el, '')\r\n        }\r\n        if (nextShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n          mountChildren(c2, el)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const patchElement = (oldValue, newValue, container) => {\r\n    // 元素是相同节点\r\n    const el = (newValue.el = oldValue.el)\r\n    const oldProps = oldValue.props\r\n    const newProps = newValue.props\r\n    patchProps(oldProps, newProps, el)\r\n    patchChildren(oldValue, newValue, el)\r\n  }\r\n  const processElement = (oldValue, newValue, container, ancher) => {\r\n    if (oldValue === null) {\r\n      mountElement(newValue, container, ancher)\r\n    } else {\r\n      patchElement(oldValue, newValue, container)\r\n    }\r\n  }\r\n  // ----------元素end----------\r\n  // -------文本start---------\r\n  const processText = (oldVal, newVal, container) => {\r\n    if (oldVal === null) {\r\n      hostInsert((newVal.el = hostCreateText(newVal.children)), container)\r\n    }\r\n  }\r\n  // -------文本end---------\r\n  const unmount = (vnode) => {\r\n    // 如果是组件调用组件生命周期\r\n    hostRemove(vnode.el)\r\n  }\r\n  const isSameVNodeType = (oldVal, newVal) =>\r\n    oldVal.type === newVal.type && newVal.key === oldVal.key\r\n  function patch(oldVal, newVal, container, ancher = null) {\r\n    // 这里做判断组件类别\r\n    const { shapeFlag, type } = newVal\r\n    if (oldVal && !isSameVNodeType(oldVal, newVal)) {\r\n      // 把以前的删掉换成新的\r\n      ancher = hostNextSibling(oldVal.el)\r\n      unmount(oldVal)\r\n      oldVal = null\r\n    }\r\n    switch (type) {\r\n      case Text:\r\n        processText(oldVal, newVal, container)\r\n        break\r\n      default:\r\n        if (shapeFlag & ShapeFlags.ELEMENT) {\r\n          // 元素\r\n          processElement(oldVal, newVal, container, ancher)\r\n        } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n          // 组件\r\n          console.log(22222)\r\n          processComponent(oldVal, newVal, container)\r\n        }\r\n    }\r\n  }\r\n  const render = (vnode, container) => {\r\n    patch(null, vnode, container)\r\n  }\r\n  return {\r\n    createApp: createAppAPI(render),\r\n  }\r\n}\r\n","import { isVNode, createVNode } from './vnode'\r\nimport { isArray, isObject } from '@vue3-mini/shared'\r\n\r\nexport function h(type, propsOrChildren, children) {\r\n  const l = arguments.length\r\n  if (l === 2) {\r\n    // 类型 + 属性/孩子\r\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\r\n      if (isVNode(propsOrChildren)) {\r\n        return createVNode(type, null, [propsOrChildren])\r\n      }\r\n      return createVNode(type, propsOrChildren)\r\n    } else {\r\n      return createVNode(type, null, propsOrChildren)\r\n    }\r\n  } else {\r\n    if (l > 3) {\r\n      // eslint-disable-next-line prefer-rest-params\r\n      children = Array.prototype.slice.call(arguments, 2)\r\n    } else if (l === 3 && isVNode(children)) {\r\n      children = [children]\r\n    }\r\n    return createVNode(type, propsOrChildren, children)\r\n  }\r\n}\r\n","const nodeOpts = {\r\n  // 元素操作\r\n  createElement: (tagName) => document.createElement(tagName),\r\n  remove: (child) => {\r\n    const parent = child.parentNode\r\n    parent && parent.removeChild(child)\r\n  },\r\n  insert: (child, parent, anchor = null) => parent.insertBefore(child, anchor),\r\n  querySelector: (selector) => document.querySelector(selector),\r\n  setElementText: (el, text) => (el.textContent = text),\r\n  // 文本\r\n  createText: (text) => document.createTextNode(text),\r\n  setText: (node, text) => (node.nodeValue = text),\r\n  nextSibling: (node) => node.nextSibling,\r\n}\r\n\r\nexport { nodeOpts }\r\n","export const patchAttrs = (el, key, value) => {\r\n  if (!value) {\r\n    el.removeAttribute(key)\r\n  } else {\r\n    el.setAttribute(key, value)\r\n  }\r\n}\r\n","export const patchStyle = (el, prev, next) => {\r\n  const style = el.style\r\n  if (next === null) {\r\n    el.removeAttribute('style')\r\n  } else {\r\n    if (prev) {\r\n      for (const key in prev) {\r\n        // 老的有新的没有置空\r\n        if (!next[key]) {\r\n          style[key] = ''\r\n        }\r\n      }\r\n    }\r\n    if (next) {\r\n      for (const key in next) {\r\n        style[key] = next[key]\r\n      }\r\n    }\r\n  }\r\n}\r\n","export const patchClass = (el, next = '') => {\r\n  el.className = next\r\n}\r\n","export const patchEvent = (el, key, value) => {\r\n  const eventName = key.slice(2).toLowerCase()\r\n  const invokers = el._vei || (el._vei = {})\r\n  let exists = invokers[eventName] // 取出老的\r\n  if (value && exists) {\r\n    // 新的老的都存在  更新事件\r\n    exists.value = value\r\n  } else {\r\n    if (value) {\r\n      // 新的有 添加事件\r\n      const invoker = (invokers[eventName] = createInvoker(value))\r\n      el.addEventListener(eventName, invoker)\r\n    } else {\r\n      // 老的有 移除事件\r\n      el.removeEventListener(eventName, exists)\r\n      exists = undefined\r\n    }\r\n  }\r\n}\r\n\r\nfunction createInvoker(value) {\r\n  const invoker = (e) => {\r\n    invoker.value(e)\r\n  }\r\n  invoker.value = value\r\n  return invoker\r\n}\r\n","import { patchAttrs } from './modules/attrs'\r\nimport { patchStyle } from './modules/style'\r\nimport { patchClass } from './modules/class'\r\nimport { patchEvent } from './modules/event'\r\n// 针对属性操作\r\nexport const patchProps = (el, key, prev, next) => {\r\n  switch (key) {\r\n    case 'class':\r\n      patchClass(el, next)\r\n      break\r\n    case 'style':\r\n      patchStyle(el, prev, next)\r\n      break\r\n    default:\r\n      if (/^on[A-Z]/.test(key)) {\r\n        patchEvent(el, key, next)\r\n      } else {\r\n        patchAttrs(el, key, next)\r\n      }\r\n      break\r\n  }\r\n}\r\n","import { createRender, h } from '@vue3-mini/runtime-core'\r\nimport { assign } from '@vue3-mini/shared'\r\nimport { nodeOpts } from './nodeOps'\r\nimport { patchProps } from './patchProps'\r\n/**\r\n * runtime-dom 核心\r\n * 1. 提供domAPI\r\n * 2. 操作节点、属性\r\n */\r\n\r\nconst renderOptions = assign({ patchProps }, nodeOpts)\r\n\r\n/**\r\n * 用户调用runtime-dom --> runtime-core\r\n * runtime-dom就是为了解决平台差异（浏览器的）和一些基本的dom操作 挂载渲染结果\r\n * runtime-core主要是用来渲染的\r\n */\r\nexport function createApp(rootComponent, rootProps = null) {\r\n  const app = createRender(renderOptions).createApp(rootComponent, rootProps)\r\n  const { mount } = app\r\n  app.mount = function (container) {\r\n    // 清空容器\r\n    container = nodeOpts.querySelector(container)\r\n    container.innerHTML = ''\r\n    mount(container)\r\n  }\r\n  return app\r\n}\r\n\r\nexport { h }\r\n\r\nexport * from '@vue3-mini/reactivity'\r\n"],"names":[],"mappings":"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"}